{
  "type": "component",
  "metadata": {},
  "schema": {
    "name": "bb-component-SuperFormPro",
    "friendlyName": "Super Form Pro",
    "description": "A Form component for Budibase",
    "styles": ["size", "padding", "border", "background"],
    "icon": "Form",
    "block": true,
    "ejectable": false,
    "hasChildren": true,
    "showEmptyState": false,
    "actions": [
      {
        "type": "ValidateForm"
      },

      {
        "type": "ScrollTo",
        "suffix": "form"
      },
      {
        "type": "ChangeFormStep",
        "suffix": "form"
      },
      {
        "type": "RefreshDatasource",
        "suffix": "provider"
      }
    ],
    "context": [
      {
        "type": "static",
        "values": [
          {
            "label": "Value",
            "key": "__value",
            "type": "object"
          },
          {
            "label": "Valid",
            "key": "__valid",
            "type": "boolean"
          },
          {
            "label": "Dirty",
            "key": "__dirty",
            "type": "boolean"
          },
          {
            "label": "Current Step",
            "key": "__currentStep",
            "type": "number"
          },
          {
            "label": "Current Step Valid",
            "key": "__currentStepValid",
            "type": "boolean"
          }
        ]
      },
      {
        "type": "form"
      },
      {
        "type": "schema"
      }
    ],
    "settings": [
      {
        "type": "boolean",
        "key": "nested",
        "label": "Sub Form",
        "hidden": true
      },
      {
        "type": "select",
        "key": "subformType",
        "label": "Type",
        "dependsOn": "nested",
        "resetOn": "nested",
        "options": [
          { "label": "Relationship", "value": "link" },
          { "label": "JSON Column", "value": "json" },
          { "label": "Embedded Document", "value": "embed" }
        ],
        "defaultValue": "embed"
      },
      {
        "type": "text",
        "key": "outerField",
        "label": "Field",
        "resetOn": ["nested", "subformType"],
        "hidden": true
      },
      {
        "type": "select",
        "key": "actionType",
        "label": "Type",
        "defaultValue": "create",
        "showInBar": true,
        "dependsOn": {
          "setting": "nested",
          "value": true,
          "invert": true
        },
        "options": [
          { "label": "View", "value": "view" },
          { "label": "Create", "value": "create" },
          { "label": "Update", "value": "update" }
        ]
      },
      {
        "type": "text",
        "key": "outerLinkField",
        "label": "Field",
        "resetOn": ["nested", "subformType"],
        "defaultValue": null,
        "hidden": true
      },
      {
        "type": "schema",
        "key": "dataSource",
        "resetOn": ["nested", "subformType"],
        "dependsOn": {
          "setting": "subformType",
          "value": "json",
          "invert": true
        },
        "label": "Schema",
        "defaultValue": {
          "name": "Custom",
          "label": "Custom"
        }
      },
      {
        "type": "number",
        "key": "formColumns",
        "label": "Columns",
        "min": 1,
        "defaultValue": 3
      },
      {
        "type": "boolean",
        "key": "disabled",
        "label": "Disabled"
      },
      {
        "type": "boolean",
        "key": "multiStep",
        "label": "Multi Step",
        "showInBar": true,
        "barIcon": "GraphPathing",
        "license": false,
        "dependsOn": {
          "setting": "nested",
          "value": true,
          "invert": true
        }
      },
      {
        "type": "boolean",
        "key": "multiRow",
        "resetOn": ["nested", "subformType"],
        "label": "Multi Row",
        "showInBar": true,
        "barIcon": "ViewRow",
        "license": false
      },
      {
        "type": "boolean",
        "key": "beautifyLabels",
        "label": "Beautify Labels",
        "defaultValue": true
      },
      {
        "type": "boolean",
        "key": "canEdit",
        "label": "Can Edit",
        "resetOn": "actionType",
        "dependsOn": { "setting": "actionType", "value": "view" },
        "defaultValue": true
      },
      {
        "type": "boolean",
        "key": "canDelete",
        "label": "Can Delete",
        "dependsOn": { "setting": "actionType", "value": "update" }
      },
      {
        "type": "boolean",
        "key": "useAutocolumns",
        "label": "Auto Columns",
        "defaultValue": true
      },

      {
        "section": true,
        "name": "Initial Data",
        "dependsOn": [
          {
            "setting": "actionType",
            "value": "create",
            "invert": true
          },
          {
            "setting": "nested",
            "value": true,
            "invert": true
          }
        ],
        "settings": [
          {
            "type": "filter",
            "key": "filter",
            "label": "Filter",
            "resetOn": "multiRow",
            "dependsOn": "multiRow"
          },
          {
            "type": "number",
            "key": "limit",
            "label": "Limit",
            "defaultValue": 5,
            "min": 1,
            "dependsOn": "multiRow"
          },
          {
            "type": "text",
            "key": "data",
            "label": "Rows",
            "dependsOn": "multiRow",
            "resetOn": ["multiRow"],
            "info": "Point to an Array of Rows"
          },
          {
            "type": "text",
            "key": "rowId",
            "label": "Row ID",
            "dependsOn": {
              "setting": "multiRow",
              "value": true,
              "invert": true
            }
          }
        ]
      },
      {
        "section": true,
        "name": "Multi Row Settings",
        "dependsOn": "multiRow",
        "settings": [
          {
            "type": "select",
            "key": "actionsMode",
            "label": "Actions Mode",
            "defaultValue": "batch",
            "dependsOn": { "setting": "nested", "value": true, "invert": true },
            "options": [
              { "label": "Batch", "value": "batch" },
              { "label": "Individual", "value": "individual" }
            ]
          },
          {
            "type": "number",
            "key": "minRows",
            "label": "Min Rows",
            "dependsOn": {
              "setting": "actionType",
              "value": "view",
              "invert": true
            },
            "defaultValue": 1,
            "min": 0
          },
          {
            "type": "number",
            "key": "maxRows",
            "label": "Max Rows",
            "dependsOn": {
              "setting": "actionType",
              "value": "view",
              "invert": true
            },
            "defaultValue": 0,
            "min": 0
          },
          {
            "type": "boolean",
            "key": "canAdd",
            "label": "Can Add",
            "defaultValue": true,
            "dependsOn": { "setting": "actionType", "value": "update" }
          },
          {
            "type": "boolean",
            "key": "canDelete",
            "label": "Can Delete",
            "dependsOn": { "setting": "actionType", "value": "update" }
          },
          {
            "type": "boolean",
            "key": "compact",
            "label": "Compact",
            "resetOn": "multiStep",
            "dependsOn": {
              "setting": "multiStep",
              "value": true,
              "invert": true
            }
          },
          {
            "type": "buttonConfiguration",
            "key": "rowActionButtons",
            "label": "Row Actions",
            "nested": true,
            "wide": true
          }
        ]
      },
      {
        "section": true,
        "name": "Header",
        "collapsed": true,
        "settings": [
          {
            "type": "boolean",
            "key": "showHeader",
            "label": "Show Header",
            "defaultValue": true
          },
          {
            "type": "text",
            "key": "formTitle",
            "label": "Title",
            "placeholder": "Auto",
            "resetOn": ["dataSource"],
            "nested": true
          },
          {
            "type": "text",
            "key": "formSubtitle",
            "label": "Subtitle",
            "nested": true,
            "resetOn": ["dataSource"]
          },
          {
            "type": "boolean",
            "key": "extendActions",
            "label": "Extend Actions"
          },
          {
            "type": "boolean",
            "key": "hideDefaultActions",
            "label": "Hide Default",
            "dependsOn": "extendActions"
          },
          {
            "type": "buttonConfiguration",
            "key": "formButtons",
            "wide": true,
            "nested": true,
            "dependsOn": "extendActions"
          }
        ]
      },
      {
        "section": true,
        "name": "Footer",
        "collapsed": true,
        "settings": [
          {
            "type": "boolean",
            "key": "showFooter",
            "label": "Show Footer",
            "defaultValue": true
          },
          {
            "type": "text",
            "key": "formFooterText",
            "label": "Text",
            "nested": true,
            "placeholder": "e.g. 'Fields marked with * are required'"
          }
        ]
      },
      {
        "section": true,
        "name": "Fields",
        "dependsOn": { "setting": "multiStep", "value": true, "invert": true },
        "settings": [
          {
            "type": "fieldConfiguration",
            "nested": true,
            "key": "fields",
            "resetOn": ["dataSource"]
          }
        ]
      },
      {
        "section": true,
        "name": "Form Steps",
        "dependsOn": "multiStep",
        "settings": [
          {
            "type": "stepConfiguration",
            "nested": true,
            "key": "steps",
            "resetOn": "dataSource",
            "defaultValue": [{}]
          }
        ]
      },
      {
        "section": true,
        "name": "nested Options",
        "dependsOn": "nested",
        "settings": [
          {
            "type": "number",
            "key": "inStep",
            "label": "Show in Step",
            "defaultValue": 1,
            "min": 1
          },
          {
            "type": "number",
            "key": "colSpan",
            "label": "Column Span",
            "defaultValue": 1
          },
          {
            "type": "number",
            "key": "rowSpan",
            "label": "Row Span",
            "defaultValue": 1
          }
        ]
      },
      {
        "section": true,
        "collapsed": true,
        "name": "Events",
        "dependsOn": {
          "setting": "hideDefaultActions",
          "value": true,
          "invert": true
        },
        "settings": [
          {
            "type": "event",
            "key": "afterSave",
            "label": "After Save",
            "nested": true
          },
          {
            "type": "event",
            "key": "afterDelete",
            "label": "After Delete",
            "nested": true,
            "dependsOn": "canDelete"
          }
        ]
      },
      {
        "section": true,
        "tag": "style",
        "name": "Form Settings",
        "settings": [
          {
            "type": "select",
            "label": "Flex Mode",
            "showLabel": false,
            "key": "flex",
            "showInBar": true,
            "barStyle": "buttons",
            "options": [
              {
                "label": "Shrink",
                "value": "none",
                "barIcon": "Minimize",
                "barTitle": "Shrink container"
              },
              {
                "label": "Grow",
                "value": "auto",
                "barIcon": "Maximize",
                "barTitle": "Grow container"
              }
            ],
            "defaultValue": "none"
          },
          {
            "type": "select",
            "label": "Components",
            "key": "component_type",
            "options": [
              {
                "label": "Super Components",
                "value": "super_components"
              },
              {
                "label": "BB Components",
                "value": "budibase_components"
              }
            ],
            "defaultValue": "super_components"
          },
          {
            "tag": "style",
            "type": "select",
            "label": "Button Position",
            "key": "buttonPosition",
            "barStyle": "buttons",
            "defaultValue": "top",
            "options": [
              {
                "label": "Top",
                "value": "top",
                "barIcon": "MarginTop",
                "barTitle": "Top"
              },
              {
                "label": "Bottom",
                "value": "bottom",
                "barIcon": "MarginBottom",
                "barTitle": "Bottom"
              }
            ]
          },
          {
            "type": "text",
            "key": "entitySingular",
            "label": "Singular Name",
            "resetOn": ["dataSource"],
            "placeholder": "row"
          },
          {
            "type": "text",
            "key": "entityPlural",
            "label": "Plural Name",
            "resetOn": ["dataSource"],
            "placeholder": "rows"
          },
          {
            "type": "boolean",
            "key": "slotFirst",
            "label": "Slot First"
          },
          {
            "type": "number",
            "key": "slotSpan",
            "label": "Slot Span",
            "defaultValue": 1,
            "min": 1,
            "max": 12
          }
        ]
      },
      {
        "section": true,
        "tag": "style",
        "name": "Field Settings",
        "settings": [
          {
            "tag": "style",
            "type": "select",
            "label": "Label Position",
            "key": "labelPosition",
            "showInBar": true,
            "barStyle": "buttons",
            "defaultValue": "fieldGroup",
            "options": [
              {
                "label": "Disabled",
                "value": false,
                "barIcon": "Cancel",
                "barTitle": "Disabled"
              },
              {
                "label": "Auto",
                "value": "fieldGroup",
                "barIcon": "Group",
                "barTitle": "Field Group"
              },
              {
                "label": "Above",
                "value": "above",
                "barIcon": "MarginTop",
                "barTitle": "Above"
              },
              {
                "label": "Left",
                "value": "left",
                "barIcon": "MarginLeft",
                "barTitle": "Left"
              }
            ]
          },
          {
            "tag": "style",
            "type": "text",
            "key": "labelTemplate",
            "label": "Label Template",
            "placeholder": "{{ field }}",
            "nested": true
          },
          {
            "tag": "style",
            "type": "select",
            "key": "relViewMode",
            "label": "Relationships",
            "options": [
              { "label": "Pills", "value": "pills" },
              { "label": "Text", "value": "text" }
            ],
            "defaultValue": "pills"
          },
          {
            "tag": "style",
            "type": "select",
            "key": "optionsViewMode",
            "label": "Options",
            "options": [
              { "label": "Color Text", "value": "colorText" },
              { "label": "Pills", "value": "pills" },
              { "label": "Text", "value": "text" }
            ],
            "defaultValue": "colorText"
          }
        ]
      }
    ]
  }
}
