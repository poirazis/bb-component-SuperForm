{
  "type": "component",
  "metadata": {},
  "schema": {
    "name": "bb-component-SuperForm",
    "friendlyName": "Super Form",
    "description": "A Form component for Budibase",
    "styles": ["padding", "border", "background"],
    "icon": "Form",
    "block": true,
    "ejectable": false,
    "hasChildren": true,
    "showEmptyState": false,
    "actions": [
      {
        "type": "ValidateForm"
      },
      {
        "type": "ClearForm"
      },
      {
        "type": "UpdateFieldValue",
        "suffix": "form"
      },
      {
        "type": "ScrollTo",
        "suffix": "form"
      },
      {
        "type": "ChangeFormStep",
        "suffix": "form"
      },
      {
        "type": "RefreshDatasource",
        "suffix": "provider"
      }
    ],
    "context": [
      {
        "type": "static",
        "values": [
          {
            "label": "Current Row",
            "key": "currentRow",
            "type": "object"
          },
          {
            "label": "Rows",
            "key": "rows",
            "type": "array"
          },
          {
            "label": "Value",
            "key": "__value",
            "type": "object"
          },
          {
            "label": "Valid",
            "key": "__valid",
            "type": "boolean"
          },
          {
            "label": "Dirty",
            "key": "__dirty",
            "type": "boolean"
          },
          {
            "label": "Current Step",
            "key": "__currentStep",
            "type": "number"
          },
          {
            "label": "Current Step Valid",
            "key": "__currentStepValid",
            "type": "boolean"
          }
        ]
      },
      {
        "type": "form",
        "suffix": "form"
      },
      {
        "type": "schema"
      }
    ],
    "settings": [
      {
        "type": "boolean",
        "key": "nested",
        "label": "Sub Form",
        "hidden": true
      },
      {
        "type": "text",
        "key": "formTitle",
        "label": "Title",
        "placeholder": "Auto",
        "nested": true
      },
      {
        "type": "text",
        "key": "formSubtitle",
        "label": "Subtitle",
        "nested": true
      },
      {
        "type": "select",
        "key": "subformType",
        "label": "Type",
        "dependsOn": "nested",
        "resetOn": "nested",
        "options": [
          { "label": "Relationship", "value": "link" },
          { "label": "JSON Column", "value": "json" },
          { "label": "Embedded Document", "value": "embed" }
        ],
        "defaultValue": "link"
      },
      {
        "type": "field/json",
        "key": "outerField",
        "label": "Field",
        "resetOn": ["nested", "subformType"],
        "dependsOn": {
          "setting": "subformType",
          "value": "link",
          "invert": true
        }
      },
      {
        "type": "field/link",
        "key": "outerLinkField",
        "label": "Field",
        "resetOn": ["nested", "subformType"],
        "hidden": true
      },
      {
        "type": "schema",
        "key": "dataSource",
        "resetOn": ["nested", "subformType"],
        "dependsOn": {
          "setting": "subformType",
          "value": "json",
          "invert": true
        },
        "label": "Schema",
        "defaultValue": {
          "name": "Custom",
          "label": "Custom"
        }
      },
      {
        "type": "select",
        "key": "actionType",
        "label": "Action Type",
        "defaultValue": "create",
        "showInBar": true,
        "dependsOn": {
          "setting": "nested",
          "value": true,
          "invert": true
        },
        "options": [
          { "label": "View", "value": "view" },
          { "label": "Create", "value": "create" },
          { "label": "Update", "value": "update" }
        ]
      },
      {
        "type": "number",
        "key": "formColumns",
        "label": "Columns",
        "min": 1,
        "defaultValue": 2
      },
      {
        "type": "boolean",
        "key": "disabled",
        "label": "Disabled"
      },
      {
        "type": "boolean",
        "key": "multiStep",
        "label": "Multi Step",
        "showInBar": true,
        "barIcon": "GraphPathing",
        "license": false,
        "dependsOn": {
          "setting": "nested",
          "value": true,
          "invert": true
        }
      },
      {
        "type": "boolean",
        "key": "multiRow",
        "resetOn": ["nested", "subformType"],
        "label": "Multi Row",
        "showInBar": true,
        "barIcon": "ViewRow",
        "license": false
      },
      {
        "type": "boolean",
        "key": "beautifyLabels",
        "label": "Beautify Labels",
        "defaultValue": true
      },
      {
        "type": "boolean",
        "key": "canEdit",
        "label": "Can Edit",
        "resetOn": "actionType",
        "dependsOn": { "setting": "actionType", "value": "view" }
      },
      {
        "type": "boolean",
        "key": "canDelete",
        "label": "Can Delete",
        "dependsOn": { "setting": "actionType", "value": "update" }
      },
      {
        "type": "boolean",
        "key": "extendActions",
        "label": "Extend Actions"
      },
      {
        "type": "boolean",
        "key": "hideDefaultActions",
        "label": "Hide Default",
        "dependsOn": "extendActions"
      },
      {
        "type": "buttonConfiguration",
        "key": "formButtons",
        "wide": true,
        "nested": true,
        "dependsOn": "extendActions"
      },
      {
        "section": true,
        "name": "Initial Data",
        "dependsOn": [
          {
            "setting": "actionType",
            "value": "create",
            "invert": true
          },
          {
            "setting": "nested",
            "value": true,
            "invert": true
          }
        ],
        "settings": [
          {
            "type": "filter",
            "key": "filter",
            "label": "Filter",
            "resetOn": "multiRow",
            "dependsOn": "multiRow"
          },
          {
            "type": "number",
            "key": "limit",
            "label": "Limit",
            "defaultValue": 5,
            "min": 1,
            "dependsOn": "multiRow"
          },
          {
            "type": "text",
            "key": "data",
            "label": "Rows",
            "dependsOn": "multiRow",
            "resetOn": ["multiRow"],
            "info": "Point to an Array of Rows"
          },
          {
            "type": "text",
            "key": "rowId",
            "label": "Row ID",
            "resetOn": ["multiRow"],
            "dependsOn": {
              "setting": "multiRow",
              "value": true,
              "invert": true
            }
          }
        ]
      },
      {
        "section": true,
        "name": "Multi Row Settings",
        "dependsOn": "multiRow",
        "settings": [
          {
            "type": "select",
            "key": "actionsMode",
            "label": "Actions Mode",
            "defaultValue": "batch",
            "dependsOn": { "setting": "nested", "value": true, "invert": true },
            "options": [
              { "label": "Batch", "value": "batch" },
              { "label": "Individual", "value": "individual" }
            ]
          },
          {
            "type": "number",
            "key": "minRows",
            "label": "Min Rows",
            "dependsOn": {
              "setting": "actionType",
              "value": "view",
              "invert": true
            },
            "defaultValue": 1,
            "min": 0
          },
          {
            "type": "number",
            "key": "maxRows",
            "label": "Max Rows",
            "dependsOn": {
              "setting": "actionType",
              "value": "view",
              "invert": true
            },
            "defaultValue": 0,
            "min": 0
          },
          {
            "type": "boolean",
            "key": "canAdd",
            "label": "Can Add",
            "defaultValue": true,
            "dependsOn": { "setting": "actionType", "value": "update" }
          },
          {
            "type": "boolean",
            "key": "canDelete",
            "label": "Can Delete",
            "dependsOn": { "setting": "actionType", "value": "update" }
          },
          {
            "type": "boolean",
            "key": "compact",
            "label": "Compact",
            "resetOn": "multiStep",
            "dependsOn": {
              "setting": "multiStep",
              "value": true,
              "invert": true
            }
          },
          {
            "type": "buttonConfiguration",
            "key": "rowActionButtons",
            "label": "Row Actions",
            "nested": true,
            "wide": true
          }
        ]
      },
      {
        "section": true,
        "name": "Form Fields",
        "dependsOn": { "setting": "multiStep", "value": true, "invert": true },
        "settings": [
          {
            "type": "fieldConfiguration",
            "nested": true,
            "key": "fields",
            "resetOn": ["dataSource"]
          }
        ]
      },
      {
        "section": true,
        "name": "Form Steps",
        "dependsOn": "multiStep",
        "settings": [
          {
            "type": "stepConfiguration",
            "nested": true,
            "key": "steps",
            "resetOn": "dataSource",
            "defaultValue": [{}]
          }
        ]
      },
      {
        "section": true,
        "name": "nested Options",
        "dependsOn": "nested",
        "settings": [
          {
            "type": "number",
            "key": "inStep",
            "label": "Show in Step",
            "defaultValue": 1,
            "min": 1
          },
          {
            "type": "number",
            "key": "colSpan",
            "label": "Column Span",
            "defaultValue": 1
          },
          {
            "type": "number",
            "key": "rowSpan",
            "label": "Row Span",
            "defaultValue": 1
          }
        ]
      },
      {
        "section": true,
        "name": "Events",
        "dependsOn": {
          "setting": "hideDefaultActions",
          "value": true,
          "invert": true
        },
        "settings": [
          {
            "type": "event",
            "key": "afterSave",
            "label": "After Save",
            "nested": true
          },
          {
            "type": "event",
            "key": "afterDelete",
            "label": "After Delete",
            "nested": true,
            "dependsOn": "canDelete"
          }
        ]
      },
      {
        "tag": "style",
        "type": "select",
        "label": "Label Position",
        "key": "labelPosition",
        "showInBar": true,
        "barStyle": "buttons",
        "defaultValue": "fieldGroup",
        "options": [
          {
            "label": "Disabled",
            "value": false,
            "barIcon": "Cancel",
            "barTitle": "Disabled"
          },
          {
            "label": "Auto",
            "value": "fieldGroup",
            "barIcon": "Group",
            "barTitle": "Field Group"
          },
          {
            "label": "Above",
            "value": "above",
            "barIcon": "MarginTop",
            "barTitle": "Above"
          },
          {
            "label": "Left",
            "value": "left",
            "barIcon": "MarginLeft",
            "barTitle": "Left"
          }
        ]
      },
      {
        "tag": "style",
        "type": "text",
        "key": "labelTemplate",
        "label": "Label Template",
        "placeholder": "{{ field }}",
        "nested": true
      },
      {
        "tag": "style",
        "type": "text",
        "key": "entitySingular",
        "label": "Singular Name",
        "resetOn": ["dataSource"],
        "placeholder": "row"
      },
      {
        "tag": "style",
        "type": "text",
        "key": "entityPlural",
        "label": "Plural Name",
        "resetOn": ["dataSource"],
        "placeholder": "rows"
      },
      {
        "tag": "style",
        "type": "icon",
        "key": "titleIcon",
        "label": "Title Icon",
        "resetOn": ["dataSource"]
      },
      {
        "tag": "style",
        "type": "select",
        "key": "relViewMode",
        "label": "Relationships",
        "options": [
          { "label": "Pills", "value": "pills" },
          { "label": "Text", "value": "text" }
        ],
        "defaultValue": "pills"
      },
      {
        "tag": "style",
        "type": "select",
        "key": "optionsViewMode",
        "label": "Options",
        "options": [
          { "label": "Color Text", "value": "colorText" },
          { "label": "Pills", "value": "pills" },
          { "label": "Text", "value": "text" }
        ],
        "defaultValue": "colorText"
      },
      {
        "tag": "style",
        "type": "boolean",
        "key": "quiet",
        "label": "Quiet"
      },
      {
        "tag": "style",
        "type": "boolean",
        "key": "slotFirst",
        "label": "Slot First"
      }
    ]
  }
}
